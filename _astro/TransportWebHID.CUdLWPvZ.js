import{b as x}from"./index.browser.esm.C8Q0Hq2t.js";import{l as vt,D as It,T as Ne,c as Rt,d as gt,e as St}from"./_vue.DuDoPpSV.js";import{a as Lt,g as Je}from"./events.FspTRlwg.js";/* empty css                                   */import"./solana-wallets-vue.DvrqfP-M.js";var Qe={};const Nt=Lt(vt);(function(r){r.__esModule=!0;var t=Nt,e=5;function n(l){var h=x.Buffer.alloc(2);return h.writeUInt16BE(l,0),h}var a={data:x.Buffer.alloc(0),dataLength:0,sequence:0},s=function(l,h){return{makeBlocks:function(o){var i=x.Buffer.concat([n(o.length),o]),c=h-5,f=Math.ceil(i.length/c);i=x.Buffer.concat([i,x.Buffer.alloc(f*c-i.length+1).fill(0)]);for(var g=[],E=0;E<f;E++){var p=x.Buffer.alloc(5);p.writeUInt16BE(l,0),p.writeUInt8(e,2),p.writeUInt16BE(E,3);var P=i.slice(E*c,(E+1)*c);g.push(x.Buffer.concat([p,P]))}return g},reduceResponse:function(o,i){var c=o||a,f=c.data,g=c.dataLength,E=c.sequence;if(i.readUInt16BE(0)!==l)throw new t.TransportError("Invalid channel","InvalidChannel");if(i.readUInt8(2)!==e)throw new t.TransportError("Invalid tag","InvalidTag");if(i.readUInt16BE(3)!==E)throw new t.TransportError("Invalid sequence","InvalidSequence");o||(g=i.readUInt16BE(5)),E++;var p=i.slice(o?5:7);return f=x.Buffer.concat([f,p]),f.length>g&&(f=f.slice(0,g)),{data:f,dataLength:g,sequence:E}},getReducedResult:function(o){if(o&&o.dataLength===o.data.length)return o.data}}};r.default=s})(Qe);const wt=Je(Qe);var he={exports:{}};const Ot="2.0.0",et=256,Tt=Number.MAX_SAFE_INTEGER||9007199254740991,At=16,yt=et-6,Pt=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var Q={MAX_LENGTH:et,MAX_SAFE_COMPONENT_LENGTH:At,MAX_SAFE_BUILD_LENGTH:yt,MAX_SAFE_INTEGER:Tt,RELEASE_TYPES:Pt,SEMVER_SPEC_VERSION:Ot,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},se={};const _t=typeof process=="object"&&se&&se.NODE_DEBUG&&/\bsemver\b/i.test(se.NODE_DEBUG)?(...r)=>console.error("SEMVER",...r):()=>{};var ee=_t;(function(r,t){const{MAX_SAFE_COMPONENT_LENGTH:e,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:a}=Q,s=ee;t=r.exports={};const l=t.re=[],h=t.safeRe=[],o=t.src=[],i=t.t={};let c=0;const f="[a-zA-Z0-9-]",g=[["\\s",1],["\\d",a],[f,n]],E=P=>{for(const[A,_]of g)P=P.split(`${A}*`).join(`${A}{0,${_}}`).split(`${A}+`).join(`${A}{1,${_}}`);return P},p=(P,A,_)=>{const O=E(A),X=c++;s(P,X,A),i[P]=X,o[X]=A,l[X]=new RegExp(A,_?"g":void 0),h[X]=new RegExp(O,_?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${o[i.NUMERICIDENTIFIER]})\\.(${o[i.NUMERICIDENTIFIER]})\\.(${o[i.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${o[i.NUMERICIDENTIFIERLOOSE]})\\.(${o[i.NUMERICIDENTIFIERLOOSE]})\\.(${o[i.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${o[i.NUMERICIDENTIFIER]}|${o[i.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${o[i.NUMERICIDENTIFIERLOOSE]}|${o[i.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${o[i.PRERELEASEIDENTIFIER]}(?:\\.${o[i.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${o[i.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${o[i.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${o[i.BUILDIDENTIFIER]}(?:\\.${o[i.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${o[i.MAINVERSION]}${o[i.PRERELEASE]}?${o[i.BUILD]}?`),p("FULL",`^${o[i.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${o[i.MAINVERSIONLOOSE]}${o[i.PRERELEASELOOSE]}?${o[i.BUILD]}?`),p("LOOSE",`^${o[i.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${o[i.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${o[i.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${o[i.XRANGEIDENTIFIER]})(?:\\.(${o[i.XRANGEIDENTIFIER]})(?:\\.(${o[i.XRANGEIDENTIFIER]})(?:${o[i.PRERELEASE]})?${o[i.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${o[i.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[i.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[i.XRANGEIDENTIFIERLOOSE]})(?:${o[i.PRERELEASELOOSE]})?${o[i.BUILD]}?)?)?`),p("XRANGE",`^${o[i.GTLT]}\\s*${o[i.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${o[i.GTLT]}\\s*${o[i.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${e}})(?:\\.(\\d{1,${e}}))?(?:\\.(\\d{1,${e}}))?`),p("COERCE",`${o[i.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",o[i.COERCEPLAIN]+`(?:${o[i.PRERELEASE]})?(?:${o[i.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",o[i.COERCE],!0),p("COERCERTLFULL",o[i.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${o[i.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${o[i.LONETILDE]}${o[i.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${o[i.LONETILDE]}${o[i.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${o[i.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${o[i.LONECARET]}${o[i.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${o[i.LONECARET]}${o[i.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${o[i.GTLT]}\\s*(${o[i.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${o[i.GTLT]}\\s*(${o[i.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${o[i.GTLT]}\\s*(${o[i.LOOSEPLAIN]}|${o[i.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${o[i.XRANGEPLAIN]})\\s+-\\s+(${o[i.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${o[i.XRANGEPLAINLOOSE]})\\s+-\\s+(${o[i.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(he,he.exports);var H=he.exports;const Ct=Object.freeze({loose:!0}),bt=Object.freeze({}),Dt=r=>r?typeof r!="object"?Ct:r:bt;var $e=Dt;const we=/^[0-9]+$/,tt=(r,t)=>{const e=we.test(r),n=we.test(t);return e&&n&&(r=+r,t=+t),r===t?0:e&&!n?-1:n&&!e?1:r<t?-1:1},Ut=(r,t)=>tt(t,r);var rt={compareIdentifiers:tt,rcompareIdentifiers:Ut};const z=ee,{MAX_LENGTH:Oe,MAX_SAFE_INTEGER:Y}=Q,{safeRe:Te,t:Ae}=H,xt=$e,{compareIdentifiers:k}=rt;let Ft=class U{constructor(t,e){if(e=xt(e),t instanceof U){if(t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>Oe)throw new TypeError(`version is longer than ${Oe} characters`);z("SemVer",t,e),this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease;const n=t.trim().match(e.loose?Te[Ae.LOOSE]:Te[Ae.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Y||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Y||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Y||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(a=>{if(/^[0-9]+$/.test(a)){const s=+a;if(s>=0&&s<Y)return s}return a}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(z("SemVer.compare",this.version,this.options,t),!(t instanceof U)){if(typeof t=="string"&&t===this.version)return 0;t=new U(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof U||(t=new U(t,this.options)),k(this.major,t.major)||k(this.minor,t.minor)||k(this.patch,t.patch)}comparePre(t){if(t instanceof U||(t=new U(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let e=0;do{const n=this.prerelease[e],a=t.prerelease[e];if(z("prerelease compare",e,n,a),n===void 0&&a===void 0)return 0;if(a===void 0)return 1;if(n===void 0)return-1;if(n===a)continue;return k(n,a)}while(++e)}compareBuild(t){t instanceof U||(t=new U(t,this.options));let e=0;do{const n=this.build[e],a=t.build[e];if(z("build compare",e,n,a),n===void 0&&a===void 0)return 0;if(a===void 0)return 1;if(n===void 0)return-1;if(n===a)continue;return k(n,a)}while(++e)}inc(t,e,n){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e,n),this.inc("pre",e,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",e,n),this.inc("pre",e,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const a=Number(n)?1:0;if(!e&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[a];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(e===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(a)}}if(e){let s=[e,a];n===!1&&(s=[e]),k(this.prerelease[0],e)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var y=Ft;const ye=y,Gt=(r,t,e=!1)=>{if(r instanceof ye)return r;try{return new ye(r,t)}catch(n){if(!e)return null;throw n}};var B=Gt;const jt=B,Xt=(r,t)=>{const e=jt(r,t);return e?e.version:null};var Vt=Xt;const kt=B,Bt=(r,t)=>{const e=kt(r.trim().replace(/^[=v]+/,""),t);return e?e.version:null};var Mt=Bt;const Pe=y,qt=(r,t,e,n,a)=>{typeof e=="string"&&(a=n,n=e,e=void 0);try{return new Pe(r instanceof Pe?r.version:r,e).inc(t,n,a).version}catch{return null}};var Ht=qt;const _e=B,zt=(r,t)=>{const e=_e(r,null,!0),n=_e(t,null,!0),a=e.compare(n);if(a===0)return null;const s=a>0,l=s?e:n,h=s?n:e,o=!!l.prerelease.length;if(!!h.prerelease.length&&!o)return!h.patch&&!h.minor?"major":l.patch?"patch":l.minor?"minor":"major";const c=o?"pre":"";return e.major!==n.major?c+"major":e.minor!==n.minor?c+"minor":e.patch!==n.patch?c+"patch":"prerelease"};var Yt=zt;const Wt=y,Kt=(r,t)=>new Wt(r,t).major;var Zt=Kt;const Jt=y,Qt=(r,t)=>new Jt(r,t).minor;var er=Qt;const tr=y,rr=(r,t)=>new tr(r,t).patch;var nr=rr;const sr=B,ir=(r,t)=>{const e=sr(r,t);return e&&e.prerelease.length?e.prerelease:null};var ar=ir;const Ce=y,or=(r,t,e)=>new Ce(r,e).compare(new Ce(t,e));var b=or;const cr=b,lr=(r,t,e)=>cr(t,r,e);var ur=lr;const fr=b,hr=(r,t)=>fr(r,t,!0);var Er=hr;const be=y,dr=(r,t,e)=>{const n=new be(r,e),a=new be(t,e);return n.compare(a)||n.compareBuild(a)};var me=dr;const pr=me,$r=(r,t)=>r.sort((e,n)=>pr(e,n,t));var mr=$r;const vr=me,Ir=(r,t)=>r.sort((e,n)=>vr(n,e,t));var Rr=Ir;const gr=b,Sr=(r,t,e)=>gr(r,t,e)>0;var te=Sr;const Lr=b,Nr=(r,t,e)=>Lr(r,t,e)<0;var ve=Nr;const wr=b,Or=(r,t,e)=>wr(r,t,e)===0;var nt=Or;const Tr=b,Ar=(r,t,e)=>Tr(r,t,e)!==0;var st=Ar;const yr=b,Pr=(r,t,e)=>yr(r,t,e)>=0;var Ie=Pr;const _r=b,Cr=(r,t,e)=>_r(r,t,e)<=0;var Re=Cr;const br=nt,Dr=st,Ur=te,xr=Ie,Fr=ve,Gr=Re,jr=(r,t,e,n)=>{switch(t){case"===":return typeof r=="object"&&(r=r.version),typeof e=="object"&&(e=e.version),r===e;case"!==":return typeof r=="object"&&(r=r.version),typeof e=="object"&&(e=e.version),r!==e;case"":case"=":case"==":return br(r,e,n);case"!=":return Dr(r,e,n);case">":return Ur(r,e,n);case">=":return xr(r,e,n);case"<":return Fr(r,e,n);case"<=":return Gr(r,e,n);default:throw new TypeError(`Invalid operator: ${t}`)}};var it=jr;const Xr=y,Vr=B,{safeRe:W,t:K}=H,kr=(r,t)=>{if(r instanceof Xr)return r;if(typeof r=="number"&&(r=String(r)),typeof r!="string")return null;t=t||{};let e=null;if(!t.rtl)e=r.match(t.includePrerelease?W[K.COERCEFULL]:W[K.COERCE]);else{const o=t.includePrerelease?W[K.COERCERTLFULL]:W[K.COERCERTL];let i;for(;(i=o.exec(r))&&(!e||e.index+e[0].length!==r.length);)(!e||i.index+i[0].length!==e.index+e[0].length)&&(e=i),o.lastIndex=i.index+i[1].length+i[2].length;o.lastIndex=-1}if(e===null)return null;const n=e[2],a=e[3]||"0",s=e[4]||"0",l=t.includePrerelease&&e[5]?`-${e[5]}`:"",h=t.includePrerelease&&e[6]?`+${e[6]}`:"";return Vr(`${n}.${a}.${s}${l}${h}`,t)};var Br=kr;class Mr{constructor(){this.max=1e3,this.map=new Map}get(t){const e=this.map.get(t);if(e!==void 0)return this.map.delete(t),this.map.set(t,e),e}delete(t){return this.map.delete(t)}set(t,e){if(!this.delete(t)&&e!==void 0){if(this.map.size>=this.max){const a=this.map.keys().next().value;this.delete(a)}this.map.set(t,e)}return this}}var qr=Mr,ie,De;function D(){if(De)return ie;De=1;class r{constructor(u,I){if(I=n(I),u instanceof r)return u.loose===!!I.loose&&u.includePrerelease===!!I.includePrerelease?u:new r(u.raw,I);if(u instanceof a)return this.raw=u.value,this.set=[[u]],this.format(),this;if(this.options=I,this.loose=!!I.loose,this.includePrerelease=!!I.includePrerelease,this.raw=u.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(m=>this.parseRange(m.trim())).filter(m=>m.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const m=this.set[0];if(this.set=this.set.filter(v=>!p(v[0])),this.set.length===0)this.set=[m];else if(this.set.length>1){for(const v of this.set)if(v.length===1&&P(v[0])){this.set=[v];break}}}this.format()}format(){return this.range=this.set.map(u=>u.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(u){const m=((this.options.includePrerelease&&g)|(this.options.loose&&E))+":"+u,v=e.get(m);if(v)return v;const $=this.options.loose,R=$?h[o.HYPHENRANGELOOSE]:h[o.HYPHENRANGE];u=u.replace(R,$t(this.options.includePrerelease)),s("hyphen replace",u),u=u.replace(h[o.COMPARATORTRIM],i),s("comparator trim",u),u=u.replace(h[o.TILDETRIM],c),s("tilde trim",u),u=u.replace(h[o.CARETTRIM],f),s("caret trim",u);let L=u.split(" ").map(w=>_(w,this.options)).join(" ").split(/\s+/).map(w=>pt(w,this.options));$&&(L=L.filter(w=>(s("loose invalid filter",w,this.options),!!w.match(h[o.COMPARATORLOOSE])))),s("range list",L);const S=new Map,N=L.map(w=>new a(w,this.options));for(const w of N){if(p(w))return[w];S.set(w.value,w)}S.size>1&&S.has("")&&S.delete("");const C=[...S.values()];return e.set(m,C),C}intersects(u,I){if(!(u instanceof r))throw new TypeError("a Range is required");return this.set.some(m=>A(m,I)&&u.set.some(v=>A(v,I)&&m.every($=>v.every(R=>$.intersects(R,I)))))}test(u){if(!u)return!1;if(typeof u=="string")try{u=new l(u,this.options)}catch{return!1}for(let I=0;I<this.set.length;I++)if(mt(this.set[I],u,this.options))return!0;return!1}}ie=r;const t=qr,e=new t,n=$e,a=re(),s=ee,l=y,{safeRe:h,t:o,comparatorTrimReplace:i,tildeTrimReplace:c,caretTrimReplace:f}=H,{FLAG_INCLUDE_PRERELEASE:g,FLAG_LOOSE:E}=Q,p=d=>d.value==="<0.0.0-0",P=d=>d.value==="",A=(d,u)=>{let I=!0;const m=d.slice();let v=m.pop();for(;I&&m.length;)I=m.every($=>v.intersects($,u)),v=m.pop();return I},_=(d,u)=>(s("comp",d,u),d=ut(d,u),s("caret",d),d=X(d,u),s("tildes",d),d=ht(d,u),s("xrange",d),d=dt(d,u),s("stars",d),d),O=d=>!d||d.toLowerCase()==="x"||d==="*",X=(d,u)=>d.trim().split(/\s+/).map(I=>lt(I,u)).join(" "),lt=(d,u)=>{const I=u.loose?h[o.TILDELOOSE]:h[o.TILDE];return d.replace(I,(m,v,$,R,L)=>{s("tilde",d,m,v,$,R,L);let S;return O(v)?S="":O($)?S=`>=${v}.0.0 <${+v+1}.0.0-0`:O(R)?S=`>=${v}.${$}.0 <${v}.${+$+1}.0-0`:L?(s("replaceTilde pr",L),S=`>=${v}.${$}.${R}-${L} <${v}.${+$+1}.0-0`):S=`>=${v}.${$}.${R} <${v}.${+$+1}.0-0`,s("tilde return",S),S})},ut=(d,u)=>d.trim().split(/\s+/).map(I=>ft(I,u)).join(" "),ft=(d,u)=>{s("caret",d,u);const I=u.loose?h[o.CARETLOOSE]:h[o.CARET],m=u.includePrerelease?"-0":"";return d.replace(I,(v,$,R,L,S)=>{s("caret",d,v,$,R,L,S);let N;return O($)?N="":O(R)?N=`>=${$}.0.0${m} <${+$+1}.0.0-0`:O(L)?$==="0"?N=`>=${$}.${R}.0${m} <${$}.${+R+1}.0-0`:N=`>=${$}.${R}.0${m} <${+$+1}.0.0-0`:S?(s("replaceCaret pr",S),$==="0"?R==="0"?N=`>=${$}.${R}.${L}-${S} <${$}.${R}.${+L+1}-0`:N=`>=${$}.${R}.${L}-${S} <${$}.${+R+1}.0-0`:N=`>=${$}.${R}.${L}-${S} <${+$+1}.0.0-0`):(s("no pr"),$==="0"?R==="0"?N=`>=${$}.${R}.${L}${m} <${$}.${R}.${+L+1}-0`:N=`>=${$}.${R}.${L}${m} <${$}.${+R+1}.0-0`:N=`>=${$}.${R}.${L} <${+$+1}.0.0-0`),s("caret return",N),N})},ht=(d,u)=>(s("replaceXRanges",d,u),d.split(/\s+/).map(I=>Et(I,u)).join(" ")),Et=(d,u)=>{d=d.trim();const I=u.loose?h[o.XRANGELOOSE]:h[o.XRANGE];return d.replace(I,(m,v,$,R,L,S)=>{s("xRange",d,m,v,$,R,L,S);const N=O($),C=N||O(R),w=C||O(L),M=w;return v==="="&&M&&(v=""),S=u.includePrerelease?"-0":"",N?v===">"||v==="<"?m="<0.0.0-0":m="*":v&&M?(C&&(R=0),L=0,v===">"?(v=">=",C?($=+$+1,R=0,L=0):(R=+R+1,L=0)):v==="<="&&(v="<",C?$=+$+1:R=+R+1),v==="<"&&(S="-0"),m=`${v+$}.${R}.${L}${S}`):C?m=`>=${$}.0.0${S} <${+$+1}.0.0-0`:w&&(m=`>=${$}.${R}.0${S} <${$}.${+R+1}.0-0`),s("xRange return",m),m})},dt=(d,u)=>(s("replaceStars",d,u),d.trim().replace(h[o.STAR],"")),pt=(d,u)=>(s("replaceGTE0",d,u),d.trim().replace(h[u.includePrerelease?o.GTE0PRE:o.GTE0],"")),$t=d=>(u,I,m,v,$,R,L,S,N,C,w,M)=>(O(m)?I="":O(v)?I=`>=${m}.0.0${d?"-0":""}`:O($)?I=`>=${m}.${v}.0${d?"-0":""}`:R?I=`>=${I}`:I=`>=${I}${d?"-0":""}`,O(N)?S="":O(C)?S=`<${+N+1}.0.0-0`:O(w)?S=`<${N}.${+C+1}.0-0`:M?S=`<=${N}.${C}.${w}-${M}`:d?S=`<${N}.${C}.${+w+1}-0`:S=`<=${S}`,`${I} ${S}`.trim()),mt=(d,u,I)=>{for(let m=0;m<d.length;m++)if(!d[m].test(u))return!1;if(u.prerelease.length&&!I.includePrerelease){for(let m=0;m<d.length;m++)if(s(d[m].semver),d[m].semver!==a.ANY&&d[m].semver.prerelease.length>0){const v=d[m].semver;if(v.major===u.major&&v.minor===u.minor&&v.patch===u.patch)return!0}return!1}return!0};return ie}var ae,Ue;function re(){if(Ue)return ae;Ue=1;const r=Symbol("SemVer ANY");class t{static get ANY(){return r}constructor(c,f){if(f=e(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),l("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===r?this.value="":this.value=this.operator+this.semver.version,l("comp",this)}parse(c){const f=this.options.loose?n[a.COMPARATORLOOSE]:n[a.COMPARATOR],g=c.match(f);if(!g)throw new TypeError(`Invalid comparator: ${c}`);this.operator=g[1]!==void 0?g[1]:"",this.operator==="="&&(this.operator=""),g[2]?this.semver=new h(g[2],this.options.loose):this.semver=r}toString(){return this.value}test(c){if(l("Comparator.test",c,this.options.loose),this.semver===r||c===r)return!0;if(typeof c=="string")try{c=new h(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new o(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new o(this.value,f).test(c.semver):(f=e(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}ae=t;const e=$e,{safeRe:n,t:a}=H,s=it,l=ee,h=y,o=D();return ae}const Hr=D(),zr=(r,t,e)=>{try{t=new Hr(t,e)}catch{return!1}return t.test(r)};var ne=zr;const Yr=D(),Wr=(r,t)=>new Yr(r,t).set.map(e=>e.map(n=>n.value).join(" ").trim().split(" "));var Kr=Wr;const Zr=y,Jr=D(),Qr=(r,t,e)=>{let n=null,a=null,s=null;try{s=new Jr(t,e)}catch{return null}return r.forEach(l=>{s.test(l)&&(!n||a.compare(l)===-1)&&(n=l,a=new Zr(n,e))}),n};var en=Qr;const tn=y,rn=D(),nn=(r,t,e)=>{let n=null,a=null,s=null;try{s=new rn(t,e)}catch{return null}return r.forEach(l=>{s.test(l)&&(!n||a.compare(l)===1)&&(n=l,a=new tn(n,e))}),n};var sn=nn;const oe=y,an=D(),xe=te,on=(r,t)=>{r=new an(r,t);let e=new oe("0.0.0");if(r.test(e)||(e=new oe("0.0.0-0"),r.test(e)))return e;e=null;for(let n=0;n<r.set.length;++n){const a=r.set[n];let s=null;a.forEach(l=>{const h=new oe(l.semver.version);switch(l.operator){case">":h.prerelease.length===0?h.patch++:h.prerelease.push(0),h.raw=h.format();case"":case">=":(!s||xe(h,s))&&(s=h);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${l.operator}`)}}),s&&(!e||xe(e,s))&&(e=s)}return e&&r.test(e)?e:null};var cn=on;const ln=D(),un=(r,t)=>{try{return new ln(r,t).range||"*"}catch{return null}};var fn=un;const hn=y,at=re(),{ANY:En}=at,dn=D(),pn=ne,Fe=te,Ge=ve,$n=Re,mn=Ie,vn=(r,t,e,n)=>{r=new hn(r,n),t=new dn(t,n);let a,s,l,h,o;switch(e){case">":a=Fe,s=$n,l=Ge,h=">",o=">=";break;case"<":a=Ge,s=mn,l=Fe,h="<",o="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(pn(r,t,n))return!1;for(let i=0;i<t.set.length;++i){const c=t.set[i];let f=null,g=null;if(c.forEach(E=>{E.semver===En&&(E=new at(">=0.0.0")),f=f||E,g=g||E,a(E.semver,f.semver,n)?f=E:l(E.semver,g.semver,n)&&(g=E)}),f.operator===h||f.operator===o||(!g.operator||g.operator===h)&&s(r,g.semver))return!1;if(g.operator===o&&l(r,g.semver))return!1}return!0};var ge=vn;const In=ge,Rn=(r,t,e)=>In(r,t,">",e);var gn=Rn;const Sn=ge,Ln=(r,t,e)=>Sn(r,t,"<",e);var Nn=Ln;const je=D(),wn=(r,t,e)=>(r=new je(r,e),t=new je(t,e),r.intersects(t,e));var On=wn;const Tn=ne,An=b;var yn=(r,t,e)=>{const n=[];let a=null,s=null;const l=r.sort((c,f)=>An(c,f,e));for(const c of l)Tn(c,t,e)?(s=c,a||(a=c)):(s&&n.push([a,s]),s=null,a=null);a&&n.push([a,null]);const h=[];for(const[c,f]of n)c===f?h.push(c):!f&&c===l[0]?h.push("*"):f?c===l[0]?h.push(`<=${f}`):h.push(`${c} - ${f}`):h.push(`>=${c}`);const o=h.join(" || "),i=typeof t.raw=="string"?t.raw:String(t);return o.length<i.length?o:t};const Xe=D(),Se=re(),{ANY:ce}=Se,q=ne,Le=b,Pn=(r,t,e={})=>{if(r===t)return!0;r=new Xe(r,e),t=new Xe(t,e);let n=!1;e:for(const a of r.set){for(const s of t.set){const l=Cn(a,s,e);if(n=n||l!==null,l)continue e}if(n)return!1}return!0},_n=[new Se(">=0.0.0-0")],Ve=[new Se(">=0.0.0")],Cn=(r,t,e)=>{if(r===t)return!0;if(r.length===1&&r[0].semver===ce){if(t.length===1&&t[0].semver===ce)return!0;e.includePrerelease?r=_n:r=Ve}if(t.length===1&&t[0].semver===ce){if(e.includePrerelease)return!0;t=Ve}const n=new Set;let a,s;for(const E of r)E.operator===">"||E.operator===">="?a=ke(a,E,e):E.operator==="<"||E.operator==="<="?s=Be(s,E,e):n.add(E.semver);if(n.size>1)return null;let l;if(a&&s){if(l=Le(a.semver,s.semver,e),l>0)return null;if(l===0&&(a.operator!==">="||s.operator!=="<="))return null}for(const E of n){if(a&&!q(E,String(a),e)||s&&!q(E,String(s),e))return null;for(const p of t)if(!q(E,String(p),e))return!1;return!0}let h,o,i,c,f=s&&!e.includePrerelease&&s.semver.prerelease.length?s.semver:!1,g=a&&!e.includePrerelease&&a.semver.prerelease.length?a.semver:!1;f&&f.prerelease.length===1&&s.operator==="<"&&f.prerelease[0]===0&&(f=!1);for(const E of t){if(c=c||E.operator===">"||E.operator===">=",i=i||E.operator==="<"||E.operator==="<=",a){if(g&&E.semver.prerelease&&E.semver.prerelease.length&&E.semver.major===g.major&&E.semver.minor===g.minor&&E.semver.patch===g.patch&&(g=!1),E.operator===">"||E.operator===">="){if(h=ke(a,E,e),h===E&&h!==a)return!1}else if(a.operator===">="&&!q(a.semver,String(E),e))return!1}if(s){if(f&&E.semver.prerelease&&E.semver.prerelease.length&&E.semver.major===f.major&&E.semver.minor===f.minor&&E.semver.patch===f.patch&&(f=!1),E.operator==="<"||E.operator==="<="){if(o=Be(s,E,e),o===E&&o!==s)return!1}else if(s.operator==="<="&&!q(s.semver,String(E),e))return!1}if(!E.operator&&(s||a)&&l!==0)return!1}return!(a&&i&&!s&&l!==0||s&&c&&!a&&l!==0||g||f)},ke=(r,t,e)=>{if(!r)return t;const n=Le(r.semver,t.semver,e);return n>0?r:n<0||t.operator===">"&&r.operator===">="?t:r},Be=(r,t,e)=>{if(!r)return t;const n=Le(r.semver,t.semver,e);return n<0?r:n>0||t.operator==="<"&&r.operator==="<="?t:r};var bn=Pn;const le=H,Me=Q,Dn=y,qe=rt,Un=B,xn=Vt,Fn=Mt,Gn=Ht,jn=Yt,Xn=Zt,Vn=er,kn=nr,Bn=ar,Mn=b,qn=ur,Hn=Er,zn=me,Yn=mr,Wn=Rr,Kn=te,Zn=ve,Jn=nt,Qn=st,es=Ie,ts=Re,rs=it,ns=Br,ss=re(),is=D(),as=ne,os=Kr,cs=en,ls=sn,us=cn,fs=fn,hs=ge,Es=gn,ds=Nn,ps=On,$s=yn,ms=bn;var vs={parse:Un,valid:xn,clean:Fn,inc:Gn,diff:jn,major:Xn,minor:Vn,patch:kn,prerelease:Bn,compare:Mn,rcompare:qn,compareLoose:Hn,compareBuild:zn,sort:Yn,rsort:Wn,gt:Kn,lt:Zn,eq:Jn,neq:Qn,gte:es,lte:ts,cmp:rs,coerce:ns,Comparator:ss,Range:is,satisfies:as,toComparators:os,maxSatisfying:cs,minSatisfying:ls,minVersion:us,validRange:fs,outside:hs,gtr:Es,ltr:ds,intersects:ps,simplifyRange:$s,subset:ms,SemVer:Dn,re:le.re,src:le.src,tokens:le.t,SEMVER_SPEC_VERSION:Me.SEMVER_SPEC_VERSION,RELEASE_TYPES:Me.RELEASE_TYPES,compareIdentifiers:qe.compareIdentifiers,rcompareIdentifiers:qe.rcompareIdentifiers};const He=Je(vs);var Ee=function(){return Ee=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a])}return r},Ee.apply(this,arguments)},V,T;(function(r){r.blue="blue",r.nanoS="nanoS",r.nanoSP="nanoSP",r.nanoX="nanoX",r.nanoFTS="nanoFTS"})(T||(T={}));var de=(V={},V[T.blue]={id:T.blue,productName:"Ledger Blue",productIdMM:0,legacyUsbProductId:0,usbOnly:!0,memorySize:480*1024,masks:[822083584,822149120],getBlockSize:function(r){return 4*1024}},V[T.nanoS]={id:T.nanoS,productName:"Ledger Nano S",productIdMM:16,legacyUsbProductId:1,usbOnly:!0,memorySize:320*1024,masks:[823132160],getBlockSize:function(r){var t;return He.lt((t=He.coerce(r))!==null&&t!==void 0?t:"","2.0.0")?4*1024:2*1024}},V[T.nanoSP]={id:T.nanoSP,productName:"Ledger Nano S Plus",productIdMM:80,legacyUsbProductId:5,usbOnly:!0,memorySize:1536*1024,masks:[856686592],getBlockSize:function(r){return 32}},V[T.nanoX]={id:T.nanoX,productName:"Ledger Nano X",productIdMM:64,legacyUsbProductId:4,usbOnly:!1,memorySize:2*1024*1024,masks:[855638016],getBlockSize:function(r){return 4*1024},bluetoothSpec:[{serviceUuid:"13d63400-2c97-0004-0000-4c6564676572",notifyUuid:"13d63400-2c97-0004-0001-4c6564676572",writeUuid:"13d63400-2c97-0004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-0004-0003-4c6564676572"}]},V[T.nanoFTS]={id:T.nanoFTS,productName:"Ledger Nano FTS",productIdMM:96,legacyUsbProductId:6,usbOnly:!1,memorySize:2*1024*1024,masks:[857735168],getBlockSize:function(r){return 4*1024},bluetoothSpec:[{serviceUuid:"13d63400-2c97-6004-0000-4c6564676572",notifyUuid:"13d63400-2c97-6004-0001-4c6564676572",writeUuid:"13d63400-2c97-6004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-6004-0003-4c6564676572"}]},V);T.blue,T.nanoS,T.nanoSP,T.nanoX,T.nanoFTS;var ze=Object.values(de),ot=11415,Ye=function(r){var t=ze.find(function(a){return a.legacyUsbProductId===r});if(t)return t;var e=r>>8,n=ze.find(function(a){return a.productIdMM===e});return n},Is=[],We={};for(var Rs in de){var Ke=de[Rs],ue=Ke.bluetoothSpec;if(ue)for(var fe=0;fe<ue.length;fe++){var Z=ue[fe];Is.push(Z.serviceUuid),We[Z.serviceUuid]=We[Z.serviceUuid.replace(/-/g,"")]=Ee({deviceModel:Ke},Z)}}let gs=0;const j=[],Ze=(r,t,e)=>{const n={type:r,id:String(++gs),date:new Date};t&&(n.message=t),Ls(n)},Ss=r=>(j.push(r),()=>{const t=j.indexOf(r);t!==-1&&(j[t]=j[j.length-1],j.pop())});function Ls(r){for(let t=0;t<j.length;t++)try{j[t](r)}catch(e){console.error(e)}}typeof window<"u"&&(window.__ledgerLogsListen=Ss);var Ns=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),F=function(r,t,e,n){function a(s){return s instanceof e?s:new e(function(l){l(s)})}return new(e||(e=Promise))(function(s,l){function h(c){try{i(n.next(c))}catch(f){l(f)}}function o(c){try{i(n.throw(c))}catch(f){l(f)}}function i(c){c.done?s(c.value):a(c.value).then(h,o)}i((n=n.apply(r,t||[])).next())})},G=function(r,t){var e={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,l;return l={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function h(i){return function(c){return o([i,c])}}function o(i){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,a&&(s=i[0]&2?a.return:i[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,i[1])).done)return s;switch(a=0,s&&(i=[i[0]&2,s.value]),i[0]){case 0:case 1:s=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,a=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(s=e.trys,!(s=s.length>0&&s[s.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!s||i[1]>s[0]&&i[1]<s[3])){e.label=i[1];break}if(i[0]===6&&e.label<s[1]){e.label=s[1],s=i;break}if(s&&e.label<s[2]){e.label=s[2],e.ops.push(i);break}s[2]&&e.ops.pop(),e.trys.pop();continue}i=t.call(r,e)}catch(c){i=[6,c],a=0}finally{n=s=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},ws=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),a,s=[],l;try{for(;(t===void 0||t-- >0)&&!(a=n.next()).done;)s.push(a.value)}catch(h){l={error:h}}finally{try{a&&!a.done&&(e=n.return)&&e.call(n)}finally{if(l)throw l.error}}return s},Os=[{vendorId:ot}],Ts=function(){return Promise.resolve(!!(window.navigator&&window.navigator.hid))},J=function(){var r=navigator.hid;if(!r)throw new gt("navigator.hid is not supported","HIDNotSupported");return r};function ct(){return F(this,void 0,void 0,function(){var r;return G(this,function(t){switch(t.label){case 0:return[4,J().requestDevice({filters:Os})];case 1:return r=t.sent(),Array.isArray(r)?[2,r]:[2,[r]]}})})}function pe(){return F(this,void 0,void 0,function(){var r;return G(this,function(t){switch(t.label){case 0:return[4,J().getDevices()];case 1:return r=t.sent(),[2,r.filter(function(e){return e.vendorId===ot})]}})})}function As(){return F(this,void 0,void 0,function(){var r,t;return G(this,function(e){switch(e.label){case 0:return[4,pe()];case 1:return r=e.sent(),r.length>0?[2,r[0]]:[4,ct()];case 2:return t=e.sent(),[2,t[0]]}})})}var Ds=function(r){Ns(t,r);function t(e){var n=r.call(this)||this;return n.channel=Math.floor(Math.random()*65535),n.packetSize=64,n.inputs=[],n.read=function(){return n.inputs.length?Promise.resolve(n.inputs.shift()):new Promise(function(a){n.inputCallback=a})},n.onInputReport=function(a){var s=x.Buffer.from(a.data.buffer);n.inputCallback?(n.inputCallback(s),n.inputCallback=null):n.inputs.push(s)},n._disconnectEmitted=!1,n._emitDisconnect=function(a){n._disconnectEmitted||(n._disconnectEmitted=!0,n.emit("disconnect",a))},n.exchange=function(a){return F(n,void 0,void 0,function(){var s,l=this;return G(this,function(h){switch(h.label){case 0:return[4,this.exchangeAtomicImpl(function(){return F(l,void 0,void 0,function(){var o,i,c,f,g,E,p,P,A;return G(this,function(_){switch(_.label){case 0:o=this,i=o.channel,c=o.packetSize,Ze("apdu","=> "+a.toString("hex")),f=wt(i,c),g=f.makeBlocks(a),E=0,_.label=1;case 1:return E<g.length?[4,this.device.sendReport(0,g[E])]:[3,4];case 2:_.sent(),_.label=3;case 3:return E++,[3,1];case 4:return(p=f.getReducedResult(P))?[3,6]:[4,this.read()];case 5:return A=_.sent(),P=f.reduceResponse(P,A),[3,4];case 6:return Ze("apdu","<= "+p.toString("hex")),[2,p]}})})}).catch(function(o){throw o&&o.message&&o.message.includes("write")?(l._emitDisconnect(o),new It(o.message)):o})];case 1:return s=h.sent(),[2,s]}})})},n.device=e,n.deviceModel=typeof e.productId=="number"?Ye(e.productId):void 0,e.addEventListener("inputreport",n.onInputReport),n}return t.request=function(){return F(this,void 0,void 0,function(){var e,n;return G(this,function(a){switch(a.label){case 0:return[4,ct()];case 1:return e=ws.apply(void 0,[a.sent(),1]),n=e[0],[2,t.open(n)]}})})},t.openConnected=function(){return F(this,void 0,void 0,function(){var e;return G(this,function(n){switch(n.label){case 0:return[4,pe()];case 1:return e=n.sent(),e.length===0?[2,null]:[2,t.open(e[0])]}})})},t.open=function(e){return F(this,void 0,void 0,function(){var n,a;return G(this,function(s){switch(s.label){case 0:return[4,e.open()];case 1:return s.sent(),n=new t(e),a=function(l){e===l.device&&(J().removeEventListener("disconnect",a),n._emitDisconnect(new St))},J().addEventListener("disconnect",a),[2,n]}})})},t.prototype.close=function(){return F(this,void 0,void 0,function(){return G(this,function(e){switch(e.label){case 0:return[4,this.exchangeBusyPromise];case 1:return e.sent(),this.device.removeEventListener("inputreport",this.onInputReport),[4,this.device.close()];case 2:return e.sent(),[2]}})})},t.prototype.setScrambleKey=function(){},t.isSupported=Ts,t.list=pe,t.listen=function(e){var n=!1;As().then(function(s){if(!s)e.error(new Ne("Access denied to use Ledger device"));else if(!n){var l=typeof s.productId=="number"?Ye(s.productId):void 0;e.next({type:"add",descriptor:s,deviceModel:l}),e.complete()}},function(s){e.error(new Ne(s.message))});function a(){n=!0}return{unsubscribe:a}},t}(Rt);export{Ds as default};
